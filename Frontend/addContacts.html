<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Add Contacts Page</title>
    <link href="css/style.css" rel="stylesheet">
    <script src="js/code.js" defer></script>
</head>
<body id="body">


    <script>
      $(".searchSubmitBtn").click(function(){
        let elements = document.getElementsByClassName("contactWrapper");
        document.getElementById("loginResult").innerHTML = " ";
    
        while(elements.length > 0) {
            elements[0].parentNode.removeChild(elements[0]);
        }
        
        let urlRequest = new URL("https://jo531962ucf.xyz/LAMPAPI/contacts/contacts.php");
        let data;
        
        urlRequest.searchParams.append('req_type', 'create');
        urlRequest.searchParams.append('user_id', 1);
        urlRequest.searchParams.append('first_name',document.getElementById("first_name").value);
        urlRequest.searchParams.append('last_name',document.getElementById("last_name").value);
        urlRequest.searchParams.append('phone_number', document.getElementById("phone_number").value );
        urlRequest.searchParams.append('email', document.getElementById("email").value);
        urlRequest.searchParams.append('street_address', document.getElementById("street_address").value);

        console.log(urlRequest.toString());

        fetch(urlRequest, {
          headers: {
          "Content-Type": "application/json",
          },
          method: 'GET',
        })
        .then(async (response) => {
          data = await response.json();
          console.log(data);
          if(data.success == false){
            $("#loginResult").append("<p>ERROR: Contact not created </p>")
          }
          else if(data.success == true){
            window.location.href = "https://jo531962ucf.xyz/components/demo/cardDemo.php";
        }
        });

        
    });

      </script>

    <div class="login-title">
        <h2 id="title">Add Contact</h2>
    </div>

    <div class="login-form">
        <h3>Add New Contact</h3>
        <form id="addContact" onsubmit="return doAddContact()">
            <!-- First Name -->
            <div class="form-group">
                <label for="firstname">First Name:</label>
                <input type="text" id="first_name" name="first_name" required>
            </div>

            <!-- Last Name -->
            <div class="form-group">
                <label for="lastname">Last Name:</label>
                <input type="text" id="last_name" name="last_name" required>
            </div>

            <!-- Email -->
            <div class="form-group">
                <label for="email">Email:</label>
                <input type="email" id="email" name="email" required>
            </div>

            <!-- Phone Number -->
            <div class="form-group">
                <label for="phone_number">Phone Number:</label>
                <input type="tel" id="phone_number" name="phone_number" 
                       pattern="\d{3}[-.\s]?\d{3}[-.\s]?\d{4}" 
                       placeholder="xxx-xxx-xxxx"  required>
            </div>

            <!-- Address -->
            <div class="form-group">
                <label for="address">Unit or apartment number and street address:</label>
                <input type="text" id="street_address" name ="street_address" placeholder="123 Candyland Ln" required>
                <label for="'state">State:</label>
                <input type="text" id="state" name="state" placeholder="FL" required>
                <label for="zipcode">Zip code:</label>
                <input type="text" id="zip_code" name="zip_code" placeholder="12345" required>
            </div>

            <!-- Submit Button -->
             <span id="loginResult"></span>
            <div class="form-group">
                <input type="button" value="Add Contact" onclick="">
                
            </div>
        </form>
    </div>

</body>
</html>
